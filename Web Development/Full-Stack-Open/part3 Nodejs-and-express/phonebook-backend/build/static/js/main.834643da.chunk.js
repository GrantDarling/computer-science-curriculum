(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),o=n(14),s=n.n(o),u=n(3),a=n(4),i=n.n(a),l="/persons",j={getAll:function(){return i.a.get(l).then((function(e){return e.data}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},updatePerson:function(e,t){return i.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),d=function(e){return Object(b.jsxs)("p",{children:["filter shown with ",Object(b.jsx)("input",{value:e.filter,onChange:function(t){e.setFilter(t.target.value)}})]})},f=function(e){var t=e.message,n=e.alertType;return""===n?null:"success"===n?Object(b.jsx)("div",{style:{color:"green",fontStyle:"italic",fontSize:16,background:"grey"},children:t}):"error"===n?Object(b.jsx)("div",{style:{color:"red",fontStyle:"italic",fontSize:16,background:""},children:t}):void 0},h=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(""),a=Object(u.a)(s,2),i=a[0],l=a[1],d={name:c,number:i,id:""};return Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=e.persons.find((function(e){return e.name===d.name}));e.persons.some((function(e){return e.name===d.name}))?function(t,n){var r={name:n.name,number:d.number},c=JSON.stringify({name:n.name,number:n.number});console.log(r),window.confirm("Contact already exists, replace the contacts number?")?j.updatePerson(t,r).then((function(){j.getAll().then((function(t){return e.setPersons(t)}))})).catch((function(t){e.setAlertMessage(t),e.setAlertType("error"),setTimeout((function(){e.setAlertType("")}),3e3)})):j.updatePerson(t,c).catch((function(e){console.log("this: ".concat(e))}))}(n.id,n):j.create(d).then((function(t){e.setPersons(e.persons.concat(d)),e.setAlertMessage("New contact ".concat(d.name," added!")),e.setAlertType("success"),setTimeout((function(){e.setAlertType("")}),3e3)})).catch((function(t){console.log(t.response.data),e.setAlertMessage(t.response.data.error),e.setAlertType("error")})),o(""),l("")},children:[Object(b.jsxs)("div",{children:["name:   ",Object(b.jsx)("input",{value:c,onChange:function(e){o(e.target.value)}})," ",Object(b.jsx)("br",{}),"number: ",Object(b.jsx)("input",{value:i,onChange:function(e){l(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){return Object(b.jsx)(b.Fragment,{children:e.persons.filter((function(t){return void 0!==t.name?t.name.includes(e.filter):""})).map((function(t){return Object(b.jsxs)("p",{children:[t.name," ",t.number," ",Object(b.jsx)("button",{onClick:function(){return e.deletePerson(t.id)},children:"delete"})]},t.id)}))})},m=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),s=Object(u.a)(o,2),a=s[0],i=s[1],l=Object(r.useState)(""),m=Object(u.a)(l,2),O=m[0],g=m[1],x=Object(r.useState)(""),v=Object(u.a)(x,2),y=v[0],A=v[1];return Object(r.useEffect)((function(){j.getAll().then((function(e){return c(e)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{message:O,alertType:y}),Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(d,{persons:n,setFilter:i}),Object(b.jsx)(h,{persons:n,setPersons:c,setAlertMessage:g,setAlertType:A}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(p,{persons:n,filter:a,deletePerson:function(e){return function(e){window.confirm("Delete contact?")&&j.deletePerson(e).then((function(){j.getAll().then((function(e){return c(e)}))}))}(e)}})]})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.834643da.chunk.js.map